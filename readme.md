# npfm

node experiments around [PFM](https://sourceforge.net/projects/packfilemanager/) modding tool.

[![Build Status](https://travis-ci.org/mklabs/twmods.svg?branch=npfm)](https://travis-ci.org/mklabs/twmods)

## Installation

    # either use npm or yarn
    git clone -b npfm --single-branch git@github.com:mklabs/twmods.git

    # then cd into the project folder and run npm i
    npm install

    # run the test
    npm test

---

- `test/vinyl.js` - Just a basic custom vinyl-fs adapter that genrates the
  according virtual directory tree and output in `./output`

- `test/stream.js` - A node script that tries to implement
  [PackFileCode#writeToFile()](https://sourceforge.net/p/packfilemanager/code/HEAD/tree/trunk/Common/PackFileCodec.cs#l98)
  main logic. The idea is to consume the Vinyl objects generated by
  lib/vinyl-pack.js and generate the stream go build the final pack file.

Now, I just need to finish up the stream and the 2 or 3 bytes off (Used Hex
Editor to better see the differences between a PFM saved pack and test.pack
with the same file structure), and link it up to vinyl-pack.

The build scripts are then really easy to setup with npm scripts.
